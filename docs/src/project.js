require=function e(t,n,i){function s(c,r){if(!n[c]){if(!t[c]){var o="function"==typeof require&&require;if(!r&&o)return o(c,!0);if(a)return a(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){var n=t[c][1][e];return s(n?n:e)},l,l.exports,e,t,n,i)}return n[c].exports}for(var a="function"==typeof require&&require,c=0;c<i.length;c++)s(i[c]);return s}({CommingObject:[function(e,t,n){"use strict";cc._RFpush(t,"a1d1cFdewdL/4sp7L9ySp8x","CommingObject"),cc.Class({"extends":cc.Component,properties:{moveSpeed:500},onLoad:function(){},update:function(e){var t=this.moveSpeed*e;this.node.x<-(.5*cc.director.getVisibleSize().width)-this.node.width?this.node.destroy():this.node.x=this.node.x-t}}),cc._RFpop()},{}],GoingObject:[function(e,t,n){"use strict";cc._RFpush(t,"5d963Qa6cpOba8/wJWA0aBa","GoingObject"),cc.Class({"extends":cc.Component,properties:{moveSpeed:500},onLoad:function(){},update:function(e){var t=this.moveSpeed*e;this.node.x>.5*cc.director.getVisibleSize().width+this.node.width?this.node.destroy():this.node.x=this.node.x+t}}),cc._RFpop()},{}],Player:[function(e,t,n){"use strict";cc._RFpush(t,"24218UIJZpOrI6qmValTu97","Player");var i=e("StageManager");cc.Class({"extends":cc.Component,properties:{stageManager:{"default":null,type:i},jumpDurationTime:.6,jumpHeight:0,_isJumping:!1},onLoad:function(){this.setTouchEvent()},setTouchEvent:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowtouch:!0,onTouchBegan:function(t,n){return e.jumpPlayer(),!0}},e.node)},jumpPlayer:function(){if(!this._isJumping){var e=this.node.getComponent(cc.Animation);e.play("PlayerJump"),this._isJumping=!0;var t=this,n=cc.jumpBy(this.jumpDurationTime,0,0,this.jumpHeight,1),i=cc.callFunc(function(){t._isJumping=!1,e.play("PlayerRunning")},this);this.node.runAction(cc.sequence(n,i))}},onEnable:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(e,t){switch(e.tag){case 1:this.stageManager.updateScore(1),this.stageManager.updatePic("good"),e.node.setOpacity(0);break;case 2:this.stageManager.updatePic("dead"),this.node.stopAllActions(),this.node.runAction(cc.jumpBy(.5,-1e3,-1e3,this.jumpHeight,1)),this.enableTouch(!1),this.stageManager.execGameOver()}},enableTouch:function(e){e&&cc.eventManger.resumeTarget(this.node)}}),cc._RFpop()},{StageManager:"StageManager"}],ScreenScroll:[function(e,t,n){"use strict";cc._RFpush(t,"92e60hgrwZBgapCsiVBP3QY","ScreenScroll"),cc.Class({"extends":cc.Component,properties:{otherBgSprite:{"default":null,type:cc.Sprite},moveSpeed:500},onLoad:function(){},update:function(e){var t=this.moveSpeed*e;this.node.x<=-this.node.width?this.node.x=this.otherBgSprite.node.x+this.otherBgSprite.node.width-t:this.node.x=this.node.x-t}}),cc._RFpop()},{}],StageManager:[function(e,t,n){"use strict";cc._RFpush(t,"eb786YTm2BIdZEgEIFW/kEE","StageManager");var i=cc.Enum({READY:0,WAITING_WAVE:1,RUNNING:2,GAMEOVER:9});cc.Class({"extends":cc.Component,properties:{gameOverLayout:{"default":null,type:cc.Node},salmonPrefab:{"default":null,type:cc.Prefab},uniPrefab:{"default":null,type:cc.Prefab},preSalmonPrefab:{"default":null,type:cc.Prefab},preUniPrefab:{"default":null,type:cc.Prefab},picGoodPrefab:{"default":null,type:cc.Prefab},picDeadPrefab:{"default":null,type:cc.Prefab},_state:i.READY,blockDistance:400,blockMAX:10,waveAccSpeed:20,waveMax:15,_wave:1,_addSpeed:0,_addDistance:0,salaTimeMax:.25,salaTimeCnt:0,score:0,_salmonCnt:0,_salmonMax:3,_uniCnt:3,_uniMax:3,lbScore:{"default":null,type:cc.Label},lbTime:{"default":null,type:cc.Label},lbResult:{"default":null,type:cc.Label},_startTime:0,_msg:null,sp2017:{"default":null,type:cc.Node},sp2018:{"default":null,type:cc.Node},lbKumanta:{"default":null,type:cc.Node}},statics:{State:i},onLoad:function(){this.createWave(400+this.blockDistance+this._addDistance),this._state=i.RUNNING,this._startTime=new Date},execGameOver:function(){this.gameOverLayout.runAction(cc.sequence(cc.scaleBy(.5,1,1),cc.scaleTo(.1,1,1)));var e=new Date,t=this.compareDate(this._startTime,2017,5,8,"jp"),n=this.toHms2(e-this._startTime);""!==t?this._msg="GW残り"+t+"のうち\n"+n+"を犠牲にして\nサーモンを"+this.score+"皿食べたクマ！":(t=this.compareDate2018(this._startTime,2018,4,28,"jp"),this._msg="来年のGWまで\n"+t+"のうち\n"+n+"を\nサーモンを"+this.score+"皿食べて消化したクマ！",this.sp2017.runAction(cc.scaleTo(.3,0,0)),this.sp2018.runAction(cc.scaleTo(.3,.8,.8))),this.lbResult.string=this._msg,cc.director.getCollisionManager().enabled=!1,this._state=i.GAMEOVER},restartStage:function(){cc.director.loadScene("GameScene")},shareResult:function(){var e="http://twitter.com/intent/tweet?text="+encodeURIComponent(this._msg+"\n")+"https://goo.gl/eq6kyW"+encodeURIComponent("\n #ゴールデンウィークま");cc.sys.openURL(e)},goApp:function(){cc.sys.openURL("https://goo.gl/jGPjX9")},update:function(e){this.lbTime.string=this.compareDate(new Date,2017,5,8),""===this.lbTime.string&&(this.lbTime.string=this.compareDate2018(new Date,2018,4,28)),this._state==i.RUNNING&&(this.salaTimeCnt+=e,this.salaTimeCnt>this.salaTimeMax&&(this.salaTimeCnt=0,this.createWave(10)))},createWave:function(e){var t=cc.find("Canvas/salmons"),n=cc.find("Canvas/pre_sala"),i=null,s=null,a=cc.randomMinus1To1();if(this.score>20?(this._salmonMax=2,this._uniMax=4):this.score>30&&(this._salmonMax=1,this._uniMax=5),a>0&&this._salmonCnt>=this._salmonMax?a-=1:a<=0&&this._uniCnt>=this._uniMax&&(a+=1),a>0)this._salmonCnt++,this._uniCnt=0,s=cc.instantiate(this.preSalmonPrefab),i=cc.instantiate(this.salmonPrefab);else{this._uniCnt++,this._salmonCnt=0,s=cc.instantiate(this.preUniPrefab),i=cc.instantiate(this.uniPrefab);var c=cc.randomMinus1To1();if(c>.75&&this.score>20){var r=i.getChildByName("uni_simple");r.runAction(cc.sequence(cc.scaleBy(1.5,1,1),cc.jumpBy(.3,0,0,100,1)))}else if(c>.3&&this.score>10){var r=i.getChildByName("uni_simple");r.runAction(cc.sequence(cc.scaleBy(1.5,1,1),cc.jumpBy(.5,0,350,100,1)))}}s.setPositionX(0-(cc.director.getVisibleSize().width/2+s.width/2)),n.addChild(s),i.setPositionX(1500),t.addChild(i)},updateScore:function(e){this.score+=e,this.lbScore.string="Salmon : "+this.score},updatePic:function(e){var t=null;if(t="good"==e?cc.instantiate(this.picGoodPrefab):cc.instantiate(this.picDeadPrefab),null!==t){var n=cc.find("Canvas/bg");n.addChild(t),t.setScale(.5),t.runAction(cc.sequence(cc.scaleTo(.5,1.5,1.5),new cc.RemoveSelf))}},compareDate:function(e,t,n,i,s){var a=new Date(t,n-1,i),c=a-e;return"jp"==s?this.toHms2(c):this.toHms(c)},compareDate2018:function(e,t,n,i,s){var a=new Date(t,n-1,i),c=a-e;return"jp"==s?this.toHms2018_2(c):this.toHms2018(c)},toHms:function(e){if(e<=0)return"";var t=String(Math.floor(e/36e5)+100).substring(1),n=String(Math.floor((e-36e5*t)/6e4)+100).substring(1),i=String(Math.round((e-36e5*t-6e4*n)/1e3)+100).substring(1),s=String(Math.round((e-36e5*t-6e4*n)%1e3)+1e3).substring(1);return t+":"+n+":"+i+":"+s},toHms2:function(e){if(e<=0)return"";var t=String(Math.floor(e/36e5)+100).substring(1),n=String(Math.floor((e-36e5*t)/6e4)+100).substring(1),i=String(Math.round((e-36e5*t-6e4*n)/1e3)+100).substring(1),s=(String(Math.round((e-36e5*t-6e4*n)%1e3)+1e3).substring(1),"");return parseInt(t)>0&&(s=t+"時間"),parseInt(n)>0&&(s+=n+"分"),parseInt(i)>0&&(s+=i+"秒"),s},toHms2018:function(e){if(e<=0)return"";var t=String(Math.floor(e/36e5)+1e4).substring(1),n=String(Math.floor((e-36e5*t)/6e4)+100).substring(1),i=String(Math.round((e-36e5*t-6e4*n)/1e3)+100).substring(1),s=String(Math.round((e-36e5*t-6e4*n)%1e3)+1e3).substring(1);return t+":"+n+":"+i+":"+s},toHms2018_2:function(e){if(e<=0)return"";var t=String(Math.floor(e/36e5)+1e4).substring(1),n=String(Math.floor((e-36e5*t)/6e4)+100).substring(1),i=String(Math.round((e-36e5*t-6e4*n)/1e3)+100).substring(1),s=(String(Math.round((e-36e5*t-6e4*n)%1e3)+1e3).substring(1),"");return parseInt(t)>0&&(s=t+"時間"),parseInt(n)>0&&(s+=n+"分"),parseInt(i)>0&&(s+=i+"秒"),s}}),cc._RFpop()},{}]},{},["CommingObject","GoingObject","Player","ScreenScroll","StageManager"]);